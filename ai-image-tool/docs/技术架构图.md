# 技术架构流程图

## 1. 整体架构流程图

```mermaid
graph TB
    subgraph 客户端
        A[用户界面] --> B[React 前端应用]
        B --> C[文件上传组件]
        B --> D[压缩配置组件]
        B --> E[图片对比组件]
        B --> F[下载管理组件]
    end

    subgraph 服务端
        G[Node.js 服务器] --> H[Express 框架]
        H --> I[图片处理服务]
        H --> J[文件管理服务]
        I --> K[Sharp 图片压缩]
        J --> L[临时文件存储]
    end

    C --> G
    D --> G
    E --> G
    F --> G
```

## 2. 图片处理流程图

```mermaid
sequenceDiagram
    participant U as 用户
    participant F as 前端
    participant S as 服务端
    participant D as 数据库/存储

    U->>F: 上传图片
    F->>S: 发送图片文件
    S->>D: 保存原始图片
    S->>S: 图片压缩处理
    S->>D: 保存压缩后图片
    S->>F: 返回处理结果
    F->>U: 显示压缩效果
    U->>F: 确认下载
    F->>S: 请求下载
    S->>F: 返回压缩后图片
    F->>U: 下载完成
```

## 3. 系统组件关系图

```mermaid
graph LR
    Markdown Preview Enhancedsubgraph 前端组件
        A[上传组件] --> B[压缩配置]
        B --> C[图片对比]
        C --> D[下载管理]
    end

    subgraph 后端服务
        E[文件上传服务] --> F[图片处理服务]
        F --> G[文件管理服务]
        G --> H[临时存储]
    end

    subgraph 数据流
        I[用户操作] --> J[API 请求]
        J --> K[数据处理]
        K --> L[响应结果]
    end
```

## 4. 部署架构图

```mermaid
graph TB
    subgraph 客户端
        A[浏览器] --> B[静态资源]
    end

    subgraph 服务端
        C[Node.js 服务] --> D[图片处理]
        C --> E[文件管理]
        D --> F[本地存储]
        E --> F
    end

    B --> C
```

## 5. 数据流转图

```mermaid
flowchart LR
    A[用户] -->|上传图片| B[前端应用]
    B -->|HTTP 请求| C[后端服务]
    C -->|处理图片| D[Sharp 库]
    D -->|保存结果| E[文件系统]
    E -->|返回URL| C
    C -->|返回数据| B
    B -->|展示结果| A
```

## 说明

以上流程图展示了系统的主要架构和流程：

1. **整体架构流程图**：展示了客户端和服务端的主要组件及其关系
2. **图片处理流程图**：详细展示了图片从上传到下载的完整流程
3. **系统组件关系图**：展示了各个组件之间的依赖关系
4. **部署架构图**：展示了系统的部署结构
5. **数据流转图**：展示了数据在系统中的流转过程

这些流程图可以帮助开发团队更好地理解系统架构，便于后续的开发和维护工作。
